(()=>{"use strict";var e,t=function(){function e(){}return Object.defineProperty(e.prototype,"initiatedTime",{get:function(){return this._initiatedTime},set:function(e){this._initiatedTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completedTime",{get:function(){return this._completedTime},set:function(e){this._completedTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"request",{get:function(){return this._request},set:function(e){this._request=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"response",{get:function(){return this._response},set:function(e){this._response=e},enumerable:!1,configurable:!0}),e}(),n=function(){function e(){this._pendingXhrCalls=new Map,this._completedXhrCalls=[]}return e.prototype.beforeXHR=function(e){var n=e.wow_xhr_id,r=new t;return r.request=e,r.initiatedTime=Date.now(),this._pendingXhrCalls.set(n,r),Promise.resolve()},e.prototype.afterXHR=function(e,t){var n=e.wow_xhr_id,r=this._pendingXhrCalls.get(n);return r.response=t,r.completedTime=Date.now(),this._completedXhrCalls.push(r),this._pendingXhrCalls.delete(n),Promise.resolve(void 0)},e.prototype.getCompletedLogs=function(){return this._completedXhrCalls},e.prototype.flushLogs=function(){return this._completedXhrCalls=[]},e.prototype.getPendingXhrCalls=function(){return Array.from(this._pendingXhrCalls.values())},e}(),r=function(){function e(){this._mocks=[],this._isPaused=!1}return e.prototype.findMock=function(e){return this._mocks.filter((function(t){return t.method===e.method&&new RegExp(t.url).test(e.url)}))[0]},e.prototype.registerMock=function(e){this._mocks.push(e)},e.prototype.pause=function(){this._isPaused=!0},e.prototype.resume=function(){this._isPaused=!1},e.prototype.beforeXHR=function(e){var t=this;return new Promise((function(n,r){var o=e.method,i=e.url,s=t.findMock({method:o,url:i});s&&s.mockRequest&&(s.mockRequest.headers&&Object.assign(e.headers,s.mockRequest.headers),s.mockRequest.body&&new RegExp(o).test("POST|PUT|PATCH")&&(e.body=s.mockRequest.body)),n()}))},e.prototype.afterXHR=function(e,t){var n=this;return new Promise((function(r,o){var i=e.method,s=e.url,u=n.findMock({method:i,url:s});if(u&&u.mockResponse&&(u.mockResponse.headers&&Object.assign(t.headers,u.mockResponse.headers),u.mockResponse.body&&(t.text=t.data=u.mockResponse.body),u.mockResponse.status&&(t.status=u.mockResponse.status,t.statusText="OK"),u.mockResponse.delay))return setTimeout(r,1e3*u.mockResponse.delay);console.log(t),r()}))},e}(),o=new Uint8Array(16);function i(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(o)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&s.test(e)};for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).substr(1));const l=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))},p=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},h=function(){function e(e){this._xhrLog=e}return e.prototype.waitForAllRequestsToComplete=function(e,t){var n=this;setTimeout((function(){return e=this,r=void 0,i=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(e){switch(e.label){case 0:return n._xhrLog.getPendingXhrCalls().length?[4,n._wait(1e3)]:[3,2];case 1:return e.sent(),[3,0];case 2:return t(),[2]}}))},new((o=void 0)||(o=Promise))((function(t,n){function s(e){try{a(i.next(e))}catch(e){n(e)}}function u(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,u)}a((i=i.apply(e,r||[])).next())}));var e,r,o,i}),1e3)},e.prototype._wait=function(e){return new Promise((function(t,n){setTimeout(t,e)}))},e}(),d=window.xhook,m=new r,y=new n,b=new h(y);!function(e,t){e.before((function(e,n){return f(this,void 0,void 0,(function(){var r,o;return p(this,(function(i){switch(i.label){case 0:e.wow_xhr_id=l(),r=0,o=t,i.label=1;case 1:return r<o.length?[4,o[r].beforeXHR(e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return n(),[2]}}))}))})),e.after((function(e,n,r){return f(this,void 0,void 0,(function(){var o,i;return p(this,(function(s){switch(s.label){case 0:o=0,i=t,s.label=1;case 1:return o<i.length?[4,i[o].afterXHR(e,n)]:[3,4];case 2:s.sent(),s.label=3;case 3:return o++,[3,1];case 4:return r(),[2]}}))}))}))}(d,[m,y]),window.wowXhr={mock:m,log:y,wait:b}})();